<<<<<<< HEAD
function chatCtrl(e,a){console.log(a);var t=this,n=a();console.log(n.$onAuthStateChanged),t.messages=e.getMessages(),t.messagesToShow=e.shownMessages(),t.sendMessage=function(){if(null!=t.author)var a={authorName:t.author.displayName,authorId:t.author.uid,authorPhoto:t.author.photoURL,text:t.newMessage};else alert("Зарегестрируйтесь для отправки сообщения");""!=t.newMessage?(e.sendMessage(a),t.newMessage=""):alert("Введите сообщение")},t.login=function(){n.$signInWithPopup("google")},t.logout=function(){n.$signOut()},n.$onAuthStateChanged(function(e){t.author=e})}function chatService(e){var a=firebase.database().ref().child("messages"),t={};return t.getMessages=function(){return e(a)},t.sendMessage=function(n){console.log(n),t.getMessages().$add(n).then(function(e){var a=e.key;console.log("added record with id "+a),t.getMessages().$indexFor(a)}),console.log(e(a))},t.shownMessages=function(){return e(a.limitToLast(25))},t}function enterSender(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.enterSender)}),a.preventDefault())})}}var config={apiKey:"AIzaSyAob_pAd1X1VHzmq5R1uT60ZSDfSH2_JTQ",authDomain:"angular-fire-chat-fa8e7.firebaseapp.com",databaseURL:"https://angular-fire-chat-fa8e7.firebaseio.com",projectId:"angular-fire-chat-fa8e7",storageBucket:"angular-fire-chat-fa8e7.appspot.com",messagingSenderId:"224848298342"};firebase.initializeApp(config),angular.module("chatApp",["firebase"]),angular.module("chatApp").controller("chatCtrl",["chatService","$firebaseAuth",chatCtrl]),angular.module("chatApp").factory("chatService",["$firebaseArray",chatService]),angular.module("chatApp").directive("enterSender",[enterSender]);
=======
function chatCtrl(e,a){console.log(a);var n=this,t=a();console.log(t.$onAuthStateChanged),n.messages=e.getMessages(),n.messagesToShow=e.shownMessages(),n.sendMessage=function(){var a={text:n.newMessage};""!=n.newMessage?(e.sendMessage(a),n.newMessage=""):alert("Введите сообщение")},n.login=function(){t.$signInWithPopup("google")},t.$onAuthStateChanged(function(e){console.log(e)})}function chatService(e){var a=firebase.database().ref().child("messages"),n={};return n.getMessages=function(){return e(a)},n.sendMessage=function(e){n.getMessages().$add(e)},n.shownMessages=function(){return e(a.limitToLast(25))},n}function enterSender(){return function(e,a,n){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(n.enterSender)}),a.preventDefault())})}}var config={apiKey:"AIzaSyAob_pAd1X1VHzmq5R1uT60ZSDfSH2_JTQ",authDomain:"angular-fire-chat-fa8e7.firebaseapp.com",databaseURL:"https://angular-fire-chat-fa8e7.firebaseio.com",projectId:"angular-fire-chat-fa8e7",storageBucket:"angular-fire-chat-fa8e7.appspot.com",messagingSenderId:"224848298342"};firebase.initializeApp(config),angular.module("chatApp",["firebase"]),angular.module("chatApp").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("chatApp").factory("ChatService",["$firebaseArray",chatService]),angular.module("chatApp").directive("enterSender",[enterSender]);
>>>>>>> ced6baf99fc53ca6b9b1566b088c82b9fe241c0e
